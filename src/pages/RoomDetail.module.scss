@use '../styles/tokens' as *;

@keyframes priceFlashAnimation{
  0%{
    color: #ff0000;
  }
  100%{
    color: inherit;
  }
}

.container{
  display:               flex;
  flex-direction:        column;
  gap:                   $space-size-base;
  font-size:             $font-size-small;
  height:                100vh;
  height:                100dvh;
  min-height:            100svh;
  max-height:            100lvh;
  overflow:              hidden;
  background:            $color-text-primary;
  color:                 $color-surface;
  justify-content:       space-between;
  padding-top:           env(safe-area-inset-top);
  padding-bottom:        calc(16px + env(safe-area-inset-bottom));
  scroll-padding-bottom: calc(16px + env(safe-area-inset-bottom));
  position:              relative;

  .typeBidContainer{
    display:         flex;
    justify-content: end;
    flex-direction:  column;
    align-items:     end;
    margin-top:      auto;
    width:           100%;
    padding-right:   $space-size-small;
    position:        relative;
    z-index:         2;

    .timeLeft{
      display:     flex;
      align-items: baseline;
      gap:         8px;

      .timeNum{
        font-family: $font-family-num-base;
        font-size:   $font-size-2xlarge;
        min-width:   $space-size-3xlarge;
        max-width:   $space-size-3xlarge;
        font-weight: $font-weight-black;
      }
    }

    .currentPrice{
      display:         flex;
      align-items:     center;
      gap:             8px;
      position:        relative;
      width:           100%;
      justify-content: flex-end;

      .priceWraper{
        display:        flex;
        align-items:    end;
        flex-direction: column;
        width:          50%;
      }

      .label{
        font-size: $font-size-base;
      }

      .price{
        font-family:  $font-family-num-base;
        font-size:    $font-size-4xlarge + $font-size-xlarge;
        font-weight:  $font-weight-black;
        position:     relative;
        padding-left: 10px;
        width:        42%;
        text-align:   right;
        transition:   color 0.3s ease;
      }

      .priceFlash{
        animation: priceFlashAnimation 1s ease-out;
      }

      .priceCurrency{
        font-size: $font-size-3xlarge;
      }
    }
  }

  .header{
    display:         flex;
    margin-top:      $space-size-large;
    margin-left:     $space-size-small;
    justify-content: space-between;
    align-items:     center;
    position:        relative;
    z-index:         2;

    .host{
      display: flex;
    }
  }
}

.videoBackground{
  position: absolute;
  top:      0;
  left:     0;
  width:    100%;
  height:   100%;
  z-index:  0;
  overflow: hidden;

  // RemoteUserコンポーネントのスタイルをオーバーライド
  :global{
    .agora_video_player{
      width:      100% !important;
      height:     100% !important;
      object-fit: cover !important; // Aspect Fill
    }
    
    video{
      width:      100% !important;
      height:     100% !important;
      object-fit: cover !important; // Aspect Fill (1080x1920をカバー)
    }
  }
}

.hostInfo{
  position:      relative;
  font-size:     $font-size-small;
  padding-left:  $space-size-small;
  align-content: center;

  .ranking{
    font-size: $font-size-micro;
  }
}

.tagsWrapper{
  display:         flex;
  justify-content: center;
  align-items:     center;
  text-align:      center;
  font-size:       $font-size-nano;
  margin-left:     $space-size-micro;

  .tags{
    padding:       1px 4px;
    background:    #ff1c4f;
    box-sizing:    border-box;
    border-radius: $border-radius-2xlarge;
  }
}

.actions{
  display:         flex;
  gap:             $space-size-micro;
  flex-wrap:       wrap;
  font-size:       $font-size-small;
  margin-right:    $space-size-small;
  align-items:     center;
  justify-content: end;
}

.traffic{
  display:       flex;
  gap:           $space-size-micro;
  padding:       $space-size-nano 6px;
  border-radius: $border-radius-2xlarge;
}

.iconWrapper{
  width:           20px;
  height:          20px;
  border-radius:   999px;
  box-sizing:      border-box;
  display:         flex;
  justify-content: center;
  align-items:     center;
}

.participantCount{
  font-family: $font-family-num-base;
}

.exitIcon{
  font-size:      30px;
  padding:        $space-size-micro;
  cursor:         pointer;
  pointer-events: auto;
  z-index:        10;
  font-weight:    $font-weight-bold;
}

.otherHost{
  display:  flex;
  width:    100%;
  position: relative;
  z-index:  2;

  .host{
    width:    100%;
    display:  flex;
    padding:  0 $space-size-small;
    position: relative;

    .hostInfo{
      .hostName{
        font-size: $font-size-large;
      }
    }

    .tagsWrapper{
      align-items: start;

      .tags{
        background: #d68e36;
        border:     1px solid $text-color-error;
        position:   absolute;
        top:        4px;
        right:      12px;
      }
    }
  }
}

.actionButtons{
  display:         flex;
  align-items:     center;
  padding:         0 $space-size-small;
  justify-content: space-between;
  position:        relative;
  z-index:         2;

  .buttonWrapper{
    position:   relative;
    box-sizing: border-box;

    .button{
      height:        45px;
      background:    #5b6370;
      border-radius: 50px;
      outline:       none;
      padding:       0 34px;
      color:         white;
      font-weight:   $font-weight-medium;
      font-size:     $font-size-xlarge;
      display:       flex;
      align-items:   center;
      border:        none;
    }
  }
}

.startAnewSessionWrapper{
  display:         flex;
  justify-content: center;
  position:        relative;
  z-index:         2;

  .startAnewSession{
    background:    yellow;
    padding:       12px 24px;
    border-radius: 20px;
    outline:       none;
    border:        none;
  }
}

.chatBox{
  display:         flex;
  flex-direction:  column;
  gap:             10px;
  max-height:      220px;
  overflow-y:      auto;
  margin-top:      auto;
  scroll-behavior: smooth;
  scrollbar-width: none;
  position:        relative;
  z-index:         2;
}

.chatInput{
  display:       flex;
  align-items:   flex-end;
  border:        $border-weight-base solid $color-border;
  padding:       $space-size-small;
  border-radius: $border-radius-2xlarge * 2;
  background:    transparent;
  width:         100%;
  color:         white;
  position:      relative;
  z-index:       2;
}

.timeRemaining, .bidAlert{
  color:       $text-color-error;
  font-weight: 600;
  margin-left: auto;
  display:     flex;
  font-family: $font-family-num-base;
}

.bidAlert{
  margin-right: auto !important;
  flex:         auto;
}

.productWrapper{
  position: relative;
  z-index:  2;
}